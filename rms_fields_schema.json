{
  "generated_from_repo": true,
  "schema_version": "2.0",
  "notes": [
    "RMS schema is repo-derived from how scripts read/join RMS data. The repo does not define a single authoritative RMS_SCHEMA like CAD_SCHEMA.",
    "Many scripts read RMS columns as dtype=str for safety. Coercions below default to string normalization unless a stronger semantic type is obvious (dates/times/amounts).",
    "default_rule_structured is intended for ETL automation (coerce_null unless stated otherwise)."
  ],
  "sources": {
    "default_rms_filename_note": "HPD_RMS_Export.xlsx (user-provided default export name; repo uses dated ALL_RMS export paths and/or data/rms/*.xlsx)",
    "join_keys": [
      "config/config_enhanced.json (join_key_rms='Case Number', join_key_cad='ReportNumberNew')",
      "scripts/backfill_incidents_from_rms.py (rms_case_col='Case Number', rms_incident_col='Incident Type_1')",
      "scripts/merge_cad_rms_incidents.py (right_on='Case Number')"
    ],
    "rms_usage_examples": [
      "scripts/backfill_incidents_from_rms.py",
      "scripts/merge_cad_rms_incidents.py",
      "scripts/backfill_address_from_rms.py",
      "scripts/esri_production_deploy.py"
    ]
  },
  "fields": [
    {
      "field_name": "Case Number",
      "source_field_name": "Case Number",
      "esri_field_name": null,
      "internal_field_name": "CaseNumber",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Primary RMS join key. Trim whitespace. If missing, joins will fail.",
      "default_rule_structured": {
        "apply_when": "missing",
        "default_value": null,
        "behavior": "error"
      },
      "domain_file": [
        "config/config_enhanced.json (rms.join_key_rms)",
        "scripts/backfill_incidents_from_rms.py"
      ]
    },
    {
      "field_name": "Incident Date",
      "source_field_name": "Incident Date",
      "esri_field_name": null,
      "internal_field_name": "IncidentDate",
      "output_type": "date",
      "output_format": "date",
      "accepted_formats": [
        "excel_date",
        "MM/dd/yyyy",
        "M/d/yyyy",
        "ISO8601_date"
      ],
      "coercions": [
        "to_date_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Incident Time",
      "source_field_name": "Incident Time",
      "esri_field_name": null,
      "internal_field_name": "IncidentTime",
      "output_type": "time",
      "output_format": "time",
      "accepted_formats": [
        "excel_time",
        "HH:mm",
        "H:mm",
        "HH:mm:ss"
      ],
      "coercions": [
        "to_time_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Incident Date_Between",
      "source_field_name": "Incident Date_Between",
      "esri_field_name": null,
      "internal_field_name": "IncidentDateBetween",
      "output_type": "date",
      "output_format": "date",
      "accepted_formats": [
        "excel_date",
        "MM/dd/yyyy",
        "M/d/yyyy",
        "ISO8601_date"
      ],
      "coercions": [
        "to_date_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Incident Time_Between",
      "source_field_name": "Incident Time_Between",
      "esri_field_name": null,
      "internal_field_name": "IncidentTimeBetween",
      "output_type": "time",
      "output_format": "time",
      "accepted_formats": [
        "excel_time",
        "HH:mm",
        "H:mm",
        "HH:mm:ss"
      ],
      "coercions": [
        "to_time_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Report Date",
      "source_field_name": "Report Date",
      "esri_field_name": null,
      "internal_field_name": "ReportDate",
      "output_type": "date",
      "output_format": "date",
      "accepted_formats": [
        "excel_date",
        "MM/dd/yyyy",
        "M/d/yyyy",
        "ISO8601_date"
      ],
      "coercions": [
        "to_date_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Report Time",
      "source_field_name": "Report Time",
      "esri_field_name": null,
      "internal_field_name": "ReportTime",
      "output_type": "time",
      "output_format": "time",
      "accepted_formats": [
        "excel_time",
        "HH:mm",
        "H:mm",
        "HH:mm:ss"
      ],
      "coercions": [
        "to_time_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Incident Type_1",
      "source_field_name": "Incident Type_1",
      "esri_field_name": null,
      "internal_field_name": "IncidentType1",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Used by repo to backfill CAD Incident when CAD Incident is blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": [
        "config/config_enhanced.json (rms.incident_field)",
        "scripts/backfill_incidents_from_rms.py"
      ]
    },
    {
      "field_name": "Incident Type_2",
      "source_field_name": "Incident Type_2",
      "esri_field_name": null,
      "internal_field_name": "IncidentType2",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Optional additional classification. Not used by repo backfill logic (Type_1 is primary).",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Incident Type_3",
      "source_field_name": "Incident Type_3",
      "esri_field_name": null,
      "internal_field_name": "IncidentType3",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Optional additional classification. Not used by repo backfill logic (Type_1 is primary).",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "FullAddress",
      "source_field_name": "FullAddress",
      "esri_field_name": null,
      "internal_field_name": "FullAddress",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Used by repo to backfill CAD FullAddress2 when CAD address is invalid/missing.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": [
        "scripts/backfill_address_from_rms.py",
        "scripts/esri_production_deploy.py"
      ]
    },
    {
      "field_name": "Grid",
      "source_field_name": "Grid",
      "esri_field_name": null,
      "internal_field_name": "Grid",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Zone",
      "source_field_name": "Zone",
      "esri_field_name": null,
      "internal_field_name": "Zone",
      "output_type": "string",
      "output_format": "text (zone id)",
      "accepted_formats": [
        "text",
        "int"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "If blank, remains blank. Maps to CAD PDZone per user mapping note.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Narrative",
      "source_field_name": "Narrative",
      "esri_field_name": null,
      "internal_field_name": "Narrative",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank. Repo uses Narrative in merge outputs for QA.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": [
        "scripts/merge_cad_rms_incidents.py (reads Narrative for merged QA export)"
      ]
    },
    {
      "field_name": "Total Value Stolen",
      "source_field_name": "Total Value Stolen",
      "esri_field_name": null,
      "internal_field_name": "TotalValueStolen",
      "output_type": "number",
      "output_format": "float",
      "accepted_formats": [
        "number",
        "currency_text"
      ],
      "coercions": [
        "to_numeric_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Total Value Recover",
      "source_field_name": "Total Value Recover",
      "esri_field_name": null,
      "internal_field_name": "TotalValueRecover",
      "output_type": "number",
      "output_format": "float",
      "accepted_formats": [
        "number",
        "currency_text"
      ],
      "coercions": [
        "to_numeric_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Registration 1",
      "source_field_name": "Registration 1",
      "esri_field_name": null,
      "internal_field_name": "Registration1",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Make1",
      "source_field_name": "Make1",
      "esri_field_name": null,
      "internal_field_name": "Make1",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Model1",
      "source_field_name": "Model1",
      "esri_field_name": null,
      "internal_field_name": "Model1",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Reg State 1",
      "source_field_name": "Reg State 1",
      "esri_field_name": null,
      "internal_field_name": "RegState1",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "US_state_abbrev",
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Registration 2",
      "source_field_name": "Registration 2",
      "esri_field_name": null,
      "internal_field_name": "Registration2",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Reg State 2",
      "source_field_name": "Reg State 2",
      "esri_field_name": null,
      "internal_field_name": "RegState2",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "US_state_abbrev",
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Make2",
      "source_field_name": "Make2",
      "esri_field_name": null,
      "internal_field_name": "Make2",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Model2",
      "source_field_name": "Model2",
      "esri_field_name": null,
      "internal_field_name": "Model2",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Reviewed By",
      "source_field_name": "Reviewed By",
      "esri_field_name": null,
      "internal_field_name": "ReviewedBy",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "CompleteCalc",
      "source_field_name": "CompleteCalc",
      "esri_field_name": null,
      "internal_field_name": "CompleteCalc",
      "output_type": "boolean",
      "output_format": "true/false",
      "accepted_formats": [
        "bool",
        "0/1",
        "Y/N",
        "Yes/No",
        "Complete/Incomplete"
      ],
      "coercions": [
        "to_bool_coerce"
      ],
      "default_rule": "If invalid or missing, set null.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Officer of Record",
      "source_field_name": "Officer of Record",
      "esri_field_name": null,
      "internal_field_name": "OfficerOfRecord",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Maps to CAD Officer per user mapping note.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Squad",
      "source_field_name": "Squad",
      "esri_field_name": null,
      "internal_field_name": "Squad",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Det_Assigned",
      "source_field_name": "Det_Assigned",
      "esri_field_name": null,
      "internal_field_name": "DetAssigned",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "Case_Status",
      "source_field_name": "Case_Status",
      "esri_field_name": null,
      "internal_field_name": "CaseStatus",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    },
    {
      "field_name": "NIBRS Classification",
      "source_field_name": "NIBRS Classification",
      "esri_field_name": null,
      "internal_field_name": "NIBRSClassification",
      "output_type": "string",
      "output_format": "text",
      "accepted_formats": [
        "text"
      ],
      "coercions": [
        "to_string_strip"
      ],
      "default_rule": "Blank stays blank.",
      "default_rule_structured": {
        "apply_when": "missing_or_invalid",
        "default_value": null,
        "behavior": "coerce_null"
      },
      "domain_file": null
    }
  ]
}


